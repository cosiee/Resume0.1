<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Scroll with GSAP</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }
        .section {
            height: 100vh;
            background-color: lightblue;
        }
    </style>
</head>
<body>

    <div class="section">Section 1</div>
    <div class="section">Section 2</div>
    <div class="section">Section 3</div>

    <!-- GSAP and ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script>
        // Disable automatic scroll restoration on page reload
        window.history.scrollRestoration = 'manual';

        function autoScroll() {
            // Reset scroll position to the top before starting animation
            window.scrollTo(0, 0); // Force scroll to top

            // Add a small delay before calculating maxScroll to ensure everything is loaded
            setTimeout(() => {
                const maxScroll = document.documentElement.scrollHeight - window.innerHeight;

                if (maxScroll <= 0) {
                    console.log("No scrollable space");
                    return; // Exit if there's no scrollable space
                }

                console.log("autoScroll-maxScroll", maxScroll);
                console.log("autoScroll1");

                // Automatically scroll to the bottom over 4 seconds on page load
                gsap.to(document.documentElement, { // Explicitly target document root for scrolling
                    scrollTo: {
                        y: maxScroll, // Scroll to the bottom of the page dynamically
                        autoKill: false // Disable autoKill to prevent interruptions
                    },
                    duration: 5, // Scroll over 5 seconds
                    ease: "power2.inOut", // Easing function for smooth scrolling
                    onStart: () => console.log('Auto-scrolling started'),
                    onUpdate: () => console.log('Scrolling in progress: ', window.scrollY), // Check the scroll progress
                    onComplete: () => console.log('Auto-scrolling completed')
                });

                console.log("autoScroll2");
            }, 200); // Add a delay of 200ms before starting the scroll to let the layout settle
        }

        window.addEventListener('load', function () {
            console.log("load-event");
            autoScroll(); // Run the scroll after the page has fully loaded
        });
    </script>

</body>
</html>
